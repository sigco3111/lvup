---

## **ê¸°ëŠ¥ëª…ì„¸ì„œ: 8. ì¥ë¹„ ì‹œìŠ¤í…œ (ê¸°ë³¸)**

**ê°œë°œ ìš°ì„ ìˆœìœ„:** Phase 2 (í•µì‹¬ ê²Œì„ ë£¨í”„ êµ¬í˜„)

### **í”„ë¡ íŠ¸ì—”ë“œ ê¸°ëŠ¥ëª…ì„¸ì„œ**

1.  **í™”ë©´ ë ˆì´ì•„ì›ƒ ë° ë””ìì¸ ëª…ì„¸**:
    *   **ì¸ë²¤í† ë¦¬ í™”ë©´ (`app/inventory/page.tsx`)**:
        *   ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì¥ë¹„ ì•„ì´í…œ ëª©ë¡ì„ ê·¸ë¦¬ë“œ ë˜ëŠ” ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ í‘œì‹œ.
        *   **í•„í„°ë§:** ì¥ë¹„ ë¶€ìœ„(ë¬´ê¸°, íˆ¬êµ¬, ê°‘ì˜· ë“± 7ê°œ ìŠ¬ë¡¯)ë³„ í•„í„°ë§ ê¸°ëŠ¥ ì œê³µ. (ShadCN `Select` ë˜ëŠ” `Tabs` í™œìš©)
        *   **ì •ë ¬:** ë“±ê¸‰(ì¼ë°˜~ì „ì„¤), íšë“ ìˆœì„œ, ê°•í™” ë ˆë²¨ ê¸°ì¤€ ì •ë ¬ ê¸°ëŠ¥ ì œê³µ. (ShadCN `Select` ë˜ëŠ” `Button` í™œìš©)
        *   **ì•„ì´í…œ ìŠ¬ë¡¯ í‘œì‹œ:** ê° ì•„ì´í…œì€ ì•„ì´ì½˜, ë“±ê¸‰(í…Œë‘ë¦¬ ìƒ‰ìƒ/ë±ƒì§€), ê°•í™” ë ˆë²¨(+X), ì ê¸ˆ ì•„ì´ì½˜(ğŸ”’)ì„ í‘œì‹œ. (ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” ShadCN `Card` ë³€í˜• í™œìš©)
        *   ë¬´í•œ ìŠ¤í¬ë¡¤ ë˜ëŠ” í˜ì´ì§€ë„¤ì´ì…˜ ì ìš© ê³ ë ¤ (ì•„ì´í…œ ê°œìˆ˜ê°€ ë§ì•„ì§ˆ ê²½ìš°).
        *   **íŒŒì¼ ìœ„ì¹˜:** `app/inventory/page.tsx`, `app/inventory/InventoryList.tsx`, `app/inventory/InventoryFilterSort.tsx`, `app/inventory/InventoryItemCard.tsx`
    *   **ì•„ì´í…œ ìƒì„¸ ì •ë³´ íŒì—… (`components/features/ItemDetailDialog.tsx`)**:
        *   ì¸ë²¤í† ë¦¬ì—ì„œ ì•„ì´í…œ í´ë¦­ ì‹œ, í•´ë‹¹ ì•„ì´í…œì˜ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ëª¨ë‹¬ ì°½.
        *   **í‘œì‹œ ì •ë³´:** ì•„ì´í…œ ì•„ì´ì½˜, ì´ë¦„, ë“±ê¸‰, ì¢…ë¥˜/ë¶€ìœ„, ê¸°ë³¸ ëŠ¥ë ¥ì¹˜, ì¶”ê°€ ì˜µì…˜(ëœë¤ ë¶€ì—¬ëœ ì˜µì…˜), ê°•í™” ë ˆë²¨, (êµ¬í˜„ ì‹œ) ì„¸íŠ¸ íš¨ê³¼ ì •ë³´.
        *   **ë¹„êµ ê¸°ëŠ¥:** í˜„ì¬ ì°©ìš© ì¤‘ì¸ ë™ì¼ ë¶€ìœ„ ì¥ë¹„ì˜ ì£¼ìš” ìŠ¤íƒ¯ì„ í•¨ê»˜ í‘œì‹œí•˜ì—¬ ë¹„êµ ìš©ì´ì„± ì œê³µ.
        *   **ì•¡ì…˜ ë²„íŠ¼:** 'ì¥ì°©'/'í•´ì œ', 'ê°•í™”'(ê¸°ëŠ¥ 7 ì—°ê³„), 'ì ê¸ˆ'/'í•´ì œ'. (ShadCN `Button`, `Tooltip` í™œìš©)
        *   **ShadCN ì»´í¬ë„ŒíŠ¸ í™œìš©:** `Dialog`, `DialogContent`, `DialogHeader`, `DialogTitle`, `DialogDescription`, `DialogFooter`, `Button`, `Badge` (ë“±ê¸‰ í‘œì‹œ), `Separator` (ì •ë³´ êµ¬ë¶„).
        *   **íŒŒì¼ ìœ„ì¹˜:** `components/features/ItemDetailDialog.tsx`
    *   **ìºë¦­í„° ì •ë³´ í™”ë©´ - ì¥ë¹„ ìŠ¬ë¡¯ (`app/character/CharacterEquipmentPanel.tsx`)**:
        *   ìºë¦­í„° ì •ë³´ í˜ì´ì§€(`app/character/page.tsx`) ë‚´ ë˜ëŠ” ë©”ì¸ ëŒ€ì‹œë³´ë“œì˜ ì¼ë¶€ë¡œ í‘œì‹œ.
        *   7ê°œì˜ ì¥ë¹„ ìŠ¬ë¡¯(ë¬´ê¸°, íˆ¬êµ¬, ìƒì˜, í•˜ì˜, ì¥ê°‘, ì‹ ë°œ, ì¥ì‹ êµ¬)ì„ ì‹œê°ì ìœ¼ë¡œ ë°°ì¹˜.
        *   ê° ìŠ¬ë¡¯ì—ëŠ” í˜„ì¬ ì°©ìš© ì¤‘ì¸ ì•„ì´í…œì˜ ì•„ì´ì½˜ í‘œì‹œ. ë¹ˆ ìŠ¬ë¡¯ì€ ê¸°ë³¸ ì´ë¯¸ì§€ ë˜ëŠ” ì•„ì´ì½˜ í‘œì‹œ.
        *   ìŠ¬ë¡¯ì— ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ê°„ë‹¨í•œ ì•„ì´í…œ ì •ë³´(ì´ë¦„, ë“±ê¸‰) íˆ´íŒ í‘œì‹œ. (ShadCN `Tooltip`)
        *   ìŠ¬ë¡¯ í´ë¦­ ì‹œ:
            *   ì˜µì…˜ 1: í•´ë‹¹ ë¶€ìœ„ ì•„ì´í…œ ëª©ë¡ í•„í„°ë§ëœ ì¸ë²¤í† ë¦¬ íŒì—… í‘œì‹œ.
            *   ì˜µì…˜ 2: ì¥ì°© í•´ì œ ê¸°ëŠ¥ë§Œ ì œê³µ.
        *   **íŒŒì¼ ìœ„ì¹˜:** `app/character/CharacterEquipmentPanel.tsx`, `app/character/EquipmentSlot.tsx`

2.  **ì‚¬ìš©ì íë¦„ ë° ìƒí˜¸ì‘ìš©**:
    *   **ì¥ë¹„ íšë“:** ìë™ ì „íˆ¬(ê¸°ëŠ¥ 2) ë° ìë™ íšë“(ê¸°ëŠ¥ 3)ì„ í†µí•´ ìƒˆ ì¥ë¹„ ì•„ì´í…œì´ `user_inventory`ì— ì¶”ê°€ë¨. ì¸ë²¤í† ë¦¬ ë©”ë‰´ì— ì•Œë¦¼ í‘œì‹œ.
    *   **ì¸ë²¤í† ë¦¬ í™•ì¸:** ì‚¬ìš©ìê°€ ì¸ë²¤í† ë¦¬ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ì—¬ íšë“í•œ ì•„ì´í…œ í™•ì¸. í•„í„°/ì •ë ¬ ê¸°ëŠ¥ ì‚¬ìš©.
    *   **ìƒì„¸ ì •ë³´ í™•ì¸ ë° ë¹„êµ:** ì•„ì´í…œ í´ë¦­ > ìƒì„¸ ì •ë³´ íŒì—… í™•ì¸. í˜„ì¬ ì°©ìš© ì¥ë¹„ì™€ ëŠ¥ë ¥ì¹˜ ë¹„êµ.
    *   **ì¥ë¹„ ì¥ì°©:** ìƒì„¸ ì •ë³´ íŒì—…ì—ì„œ 'ì¥ì°©' ë²„íŠ¼ í´ë¦­ > í•´ë‹¹ ì•„ì´í…œì´ ìºë¦­í„° ì •ë³´ íŒ¨ë„ì˜ ìŠ¬ë¡¯ì— í‘œì‹œë¨. ê¸°ì¡´ì— í•´ë‹¹ ìŠ¬ë¡¯ì— ìˆë˜ ì¥ë¹„ëŠ” í•´ì œë˜ì–´ ì¸ë²¤í† ë¦¬ë¡œ ì´ë™. ì¸ë²¤í† ë¦¬ ëª©ë¡ì—ì„œ í•´ë‹¹ ì•„ì´í…œì€ 'ì°©ìš© ì¤‘' í‘œì‹œ ë˜ëŠ” ë¹„í™œì„±í™” ì²˜ë¦¬.
    *   **ì¥ë¹„ í•´ì œ:**
        *   ìƒì„¸ ì •ë³´ íŒì—…(ì°©ìš© ì¤‘ì¸ ì•„ì´í…œ)ì—ì„œ 'í•´ì œ' ë²„íŠ¼ í´ë¦­ > ì•„ì´í…œì´ ìŠ¬ë¡¯ì—ì„œ ì œê±°ë˜ê³  ì¸ë²¤í† ë¦¬ë¡œ ì´ë™. ìºë¦­í„° ì •ë³´ íŒ¨ë„ ìŠ¬ë¡¯ì€ ë¹„ì›Œì§.
        *   ìºë¦­í„° ì •ë³´ íŒ¨ë„ ìŠ¬ë¡¯ í´ë¦­ > 'í•´ì œ' ì„ íƒ > ìœ„ì™€ ë™ì¼í•˜ê²Œ ì²˜ë¦¬.
    *   **ì•„ì´í…œ ì ê¸ˆ/í•´ì œ:** ìƒì„¸ ì •ë³´ íŒì—…ì—ì„œ 'ì ê¸ˆ'/'í•´ì œ' ë²„íŠ¼ í´ë¦­ > ì•„ì´í…œ ìŠ¬ë¡¯ì— ì ê¸ˆ ì•„ì´ì½˜ í‘œì‹œ/ìˆ¨ê¹€. ì ê¸´ ì•„ì´í…œì€ ë¶„í•´/íŒë§¤ ë¶ˆê°€ (í•´ë‹¹ ê¸°ëŠ¥ êµ¬í˜„ ì‹œ).

3.  **API ì—°ë™**:
    *   **ì¸ë²¤í† ë¦¬ ë°ì´í„° ë¡œë“œ:**
        *   Server Component (`app/inventory/page.tsx`): í˜ì´ì§€ ë¡œë“œ ì‹œ Supabase ì„œë²„ í´ë¼ì´ì–¸íŠ¸ë¡œ `user_inventory`ì™€ `game_items` ì¡°ì¸í•˜ì—¬ ë°ì´í„° ì¡°íšŒ í›„ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬.
        *   Client Component (`app/inventory/InventoryList.tsx`): `useEffect` ë‚´ì—ì„œ Supabase í´ë¼ì´ì–¸íŠ¸(`createClient`)ë¡œ ë°ì´í„° fetch. (í•„í„°/ì •ë ¬ ë³€ê²½ ì‹œ ì¬-fetch í•„ìš”)
    *   **ì¥ì°© ì¥ë¹„ ë°ì´í„° ë¡œë“œ:** ìºë¦­í„° ì •ë³´ íŒ¨ë„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `user_inventory` í…Œì´ë¸” `is_equipped=true` ì¡°ê±´ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ (Server ë˜ëŠ” Client ë°©ì‹).
    *   **ì¥ë¹„ ì¥ì°©/í•´ì œ (Server Action)**: `equipItem(userInventoryId: string)` / `unequipItem(userInventoryId: string)` í˜¸ì¶œ. `userInventoryId`ëŠ” ì•„ì´í…œ ì¸ìŠ¤í„´ìŠ¤ì˜ ê³ ìœ  ID.
    *   **ì•„ì´í…œ ì ê¸ˆ/í•´ì œ (Server Action)**: `toggleItemLock(userInventoryId: string, lock: boolean)` í˜¸ì¶œ.

4.  **í…ŒìŠ¤íŠ¸ í•­ëª©**:
    *   ì¸ë²¤í† ë¦¬ì— ë³´ìœ í•œ ëª¨ë“  ì¥ë¹„ ì•„ì´í…œì´ ì •í™•í•˜ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸ (ì•„ì´ì½˜, ë“±ê¸‰, ê°•í™” ë ˆë²¨, ì ê¸ˆ ìƒíƒœ í¬í•¨).
    *   í•„í„°ë§(ë¶€ìœ„ë³„), ì •ë ¬(ë“±ê¸‰, íšë“ìˆœ ë“±) ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸.
    *   ì•„ì´í…œ ìƒì„¸ ì •ë³´ íŒì—…ì— ëª¨ë“  ì •ë³´(ê¸°ë³¸ ìŠ¤íƒ¯, ì¶”ê°€ ì˜µì…˜ ë“±)ê°€ ì •í™•íˆ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸.
    *   ì¥ë¹„ ë¹„êµ ì •ë³´ê°€ ì •í™•í•˜ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸.
    *   'ì¥ì°©' ì‹œ ìºë¦­í„° ì •ë³´ íŒ¨ë„ ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸, ê¸°ì¡´ ì¥ë¹„ í•´ì œ ì²˜ë¦¬, ì¸ë²¤í† ë¦¬ ìƒíƒœ ë³€ê²½ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸.
    *   'í•´ì œ' ì‹œ ìºë¦­í„° ì •ë³´ íŒ¨ë„ ìŠ¬ë¡¯ ë¹„ì›Œì§, ì¸ë²¤í† ë¦¬ ìƒíƒœ ë³€ê²½ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸.
    *   'ì ê¸ˆ'/'í•´ì œ' ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ê³  UIì— ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸.
    *   ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´í…œ ë˜ëŠ” íƒ€ ìœ ì € ì•„ì´í…œì— ëŒ€í•œ ì•¡ì…˜ ì‹œë„ê°€ ë¶ˆê°€ëŠ¥í•œì§€ í™•ì¸ (ë°±ì—”ë“œ ì—°ë™ í›„).

---

### **ë°±ì—”ë“œ ê¸°ëŠ¥ëª…ì„¸ì„œ**

1.  **API ì •ì˜**:
    *   **ì¸ë²¤í† ë¦¬ ë°ì´í„° ì œê³µ API (Server Component / Route Handler)**:
        *   **ëª©ì :** ì‚¬ìš©ìì˜ ì¸ë²¤í† ë¦¬ ëª©ë¡ ì œê³µ.
        *   **ì²˜ë¦¬ ë¡œì§:** ì¸ì¦ëœ ì‚¬ìš©ìì˜ `userId`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `user_inventory` í…Œì´ë¸” ì¡°íšŒ. ì„±ëŠ¥ì„ ìœ„í•´ `game_items` í…Œì´ë¸”ê³¼ ì¡°ì¸í•˜ì—¬ ì•„ì´í…œ ê¸°ë³¸ ì •ë³´(ì´ë¦„, ë“±ê¸‰, ì•„ì´ì½˜, ìŠ¬ë¡¯ ë“±)ë¥¼ í•¨ê»˜ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ê³ ë ¤. í•„í„°ë§/ì •ë ¬ ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ ì²˜ë¦¬. í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„.
        *   **Supabase í´ë¼ì´ì–¸íŠ¸ ì˜ˆì‹œ (ì¡°ì¸):**
            ```javascript
            const { data, error } = await supabase
              .from('user_inventory')
              .select(`
                id, quantity, enhancement_level, options, is_equipped, is_locked, acquired_at,
                game_items (id, name, item_slot, grade, icon_url)
              `)
              .eq('user_id', userId)
              // .eq('game_items.item_slot', filterSlot) // í•„í„°ë§ ì˜ˆì‹œ
              // .order('game_items.grade', { ascending: false }) // ì •ë ¬ ì˜ˆì‹œ
              // .range(offset, offset + limit - 1) // í˜ì´ì§€ë„¤ì´ì…˜ ì˜ˆì‹œ
            ```
    *   **ì¥ì°© ì¥ë¹„ ë°ì´í„° ì œê³µ API (Server Component / Route Handler)**:
        *   **ëª©ì :** ì‚¬ìš©ìê°€ í˜„ì¬ ì°©ìš© ì¤‘ì¸ ì¥ë¹„ ëª©ë¡ ì œê³µ.
        *   **ì²˜ë¦¬ ë¡œì§:** ìœ„ APIì™€ ìœ ì‚¬í•˜ë‚˜, `user_inventory` ì¡°íšŒ ì‹œ `is_equipped=true` ì¡°ê±´ì„ ì¶”ê°€.
    *   **Server Action `equipItem(userInventoryId: string)`**:
        *   **íŒŒì¼ ìœ„ì¹˜:** `actions/inventory.ts`
        *   **ì²˜ë¦¬ ë¡œì§:**
            1.  ì‚¬ìš©ì ì¸ì¦ í™•ì¸ (`supabase.auth.getUser()`).
            2.  `userInventoryId`ë¡œ `user_inventory` í…Œì´ë¸”ì—ì„œ ì•„ì´í…œ ì •ë³´ ì¡°íšŒ (ì†Œìœ ê¶Œ í™•ì¸ í¬í•¨). `game_items` í…Œì´ë¸”ê³¼ ì¡°ì¸í•˜ì—¬ `item_slot` í™•ì¸.
            3.  í•´ë‹¹ `item_slot`ì— ì´ë¯¸ ì¥ì°©ëœ ì•„ì´í…œ(`existingEquippedItem`)ì´ ìˆëŠ”ì§€ `user_inventory` í…Œì´ë¸”ì—ì„œ ì¡°íšŒ (`is_equipped=true` ë° ë™ì¼ `item_slot`).
            4.  **íŠ¸ëœì­ì…˜ ì‹œì‘ (DB í•¨ìˆ˜ ê¶Œì¥):**
                *   ë§Œì•½ `existingEquippedItem`ì´ ìˆê³ , ê·¸ê²ƒì´ í˜„ì¬ ì¥ì°©í•˜ë ¤ëŠ” ì•„ì´í…œ(`userInventoryId`)ê³¼ ë‹¤ë¥´ë©´, `existingEquippedItem`ì˜ `is_equipped`ë¥¼ `false`ë¡œ ì—…ë°ì´íŠ¸.
                *   `userInventoryId` ì•„ì´í…œì˜ `is_equipped`ë¥¼ `true`ë¡œ ì—…ë°ì´íŠ¸.
            5.  **íŠ¸ëœì­ì…˜ ì¢…ë£Œ.**
            6.  ì„±ê³µ/ì‹¤íŒ¨ ê²°ê³¼ ë°˜í™˜. `revalidatePath` í˜¸ì¶œ (`/inventory`, `/character`).
    *   **Server Action `unequipItem(userInventoryId: string)`**:
        *   **íŒŒì¼ ìœ„ì¹˜:** `actions/inventory.ts`
        *   **ì²˜ë¦¬ ë¡œì§:**
            1.  ì‚¬ìš©ì ì¸ì¦ í™•ì¸.
            2.  `userInventoryId`ë¡œ `user_inventory` ì¡°íšŒ (ì†Œìœ ê¶Œ ë° `is_equipped=true` í™•ì¸).
            3.  í•´ë‹¹ ì•„ì´í…œì˜ `is_equipped`ë¥¼ `false`ë¡œ ì—…ë°ì´íŠ¸.
            4.  ì„±ê³µ/ì‹¤íŒ¨ ê²°ê³¼ ë°˜í™˜. `revalidatePath` í˜¸ì¶œ.
    *   **Server Action `toggleItemLock(userInventoryId: string, lock: boolean)`**:
        *   **íŒŒì¼ ìœ„ì¹˜:** `actions/inventory.ts`
        *   **ì²˜ë¦¬ ë¡œì§:**
            1.  ì‚¬ìš©ì ì¸ì¦ í™•ì¸.
            2.  `userInventoryId`ë¡œ `user_inventory` ì¡°íšŒ (ì†Œìœ ê¶Œ í™•ì¸).
            3.  í•´ë‹¹ ì•„ì´í…œì˜ `is_locked`ë¥¼ `lock` ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸.
            4.  ì„±ê³µ/ì‹¤íŒ¨ ê²°ê³¼ ë°˜í™˜. `revalidatePath` í˜¸ì¶œ (`/inventory`).

2.  **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë° ì—°ë™**:
    *   **`user_inventory` í…Œì´ë¸”**:
        *   `id` (uuid, PK, default `gen_random_uuid()`) - ì•„ì´í…œ ì¸ìŠ¤í„´ìŠ¤ ID
        *   `user_id` (uuid, FK to auth.users.id, not null)
        *   `item_id` (varchar or int, FK to game_items.id, not null) - ì•„ì´í…œ ì¢…ë¥˜ ID
        *   `quantity` (integer, default 1, not null) - (ì¥ë¹„ëŠ” í•­ìƒ 1)
        *   `enhancement_level` (integer, default 0, not null)
        *   `options` (jsonb, nullable) - ì˜ˆ: `{"attack": 10, "crit_chance": 0.05}`
        *   `is_equipped` (boolean, default false, not null)
        *   `is_locked` (boolean, default false, not null)
        *   `acquired_at` (timestamptz, default `now()`, not null)
        *   ì¸ë±ìŠ¤: `(user_id)`, `(user_id, is_equipped)`, `(user_id, item_id)`
        *   RLS ì •ì±… í•„ìˆ˜ ì ìš©.
    *   **`game_items` í…Œì´ë¸”**:
        *   `id` (varchar or int, PK) - ì•„ì´í…œ ì¢…ë¥˜ ID (ì˜ˆ: 'sword_001', 1001)
        *   `name` (text, not null)
        *   `description` (text)
        *   `item_type` (text, check in ('weapon', 'armor', 'accessory'), not null)
        *   `item_slot` (text, check in ('weapon', 'head', 'chest', 'legs', 'hands', 'feet', 'accessory1', 'accessory2'), not null) - (7ê°œ ìŠ¬ë¡¯ ê³ ë ¤í•˜ì—¬ ì •ì˜)
        *   `grade` (text, check in ('common', 'uncommon', 'rare', 'epic', 'legendary'), not null)
        *   `base_stats` (jsonb) - ì˜ˆ: `{"attack": 50, "defense": 10}`
        *   `icon_url` (text)
        *   `max_enhancement_level` (integer, default 10) - (ê¸°ëŠ¥ 7 ì—°ê³„)
        *   RLS ì •ì±… (ì½ê¸° ì „ìš© í—ˆìš©) ê¶Œì¥.
    *   **ì—°ë™ ë¡œì§:** Server Action ë° API í•¸ë“¤ëŸ¬ ë‚´ì—ì„œ Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ `user_inventory`, `game_items` í…Œì´ë¸” ì¡°íšŒ/ì—…ë°ì´íŠ¸. `equipItem` ë¡œì§ì˜ íŠ¸ëœì­ì…˜ ë³´ì¥ì„ ìœ„í•´ Supabase Edge Function ë˜ëŠ” PostgreSQL í•¨ìˆ˜(plpgsql) ì‚¬ìš© ê°•ë ¥ ê¶Œì¥.

3.  **í…ŒìŠ¤íŠ¸ í•­ëª©**:
    *   ì¸ë²¤í† ë¦¬/ì¥ì°© ì¥ë¹„ APIê°€ í•„í„°ë§, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜ ì¡°ê±´ì— ë§ê²Œ ì •í™•í•œ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸.
    *   `equipItem` ì•¡ì…˜: DBì—ì„œ `is_equipped` ìƒíƒœ ë³€ê²½(ê¸°ì¡´ ì¥ë¹„ false, ìƒˆ ì¥ë¹„ true) í™•ì¸. íŠ¸ëœì­ì…˜ ë¡¤ë°± í…ŒìŠ¤íŠ¸(ì¤‘ê°„ì— ì—ëŸ¬ ë°œìƒ ì‹œ). ë™ì‹œ ìš”ì²­ ì‹œ ë°ì´í„° ì •í•©ì„± í™•ì¸.
    *   `unequipItem` ì•¡ì…˜: DBì—ì„œ `is_equipped` ìƒíƒœ false ë³€ê²½ í™•ì¸.
    *   `toggleItemLock` ì•¡ì…˜: DBì—ì„œ `is_locked` ìƒíƒœ ë³€ê²½ í™•ì¸.
    *   ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ê¶Œí•œ ì—†ëŠ” `userInventoryId`ë¡œ ì•¡ì…˜ í˜¸ì¶œ ì‹œ ì‹¤íŒ¨ ì²˜ë¦¬ ë° DB ë³€ê²½ ì—†ìŒ í™•ì¸.
    *   `user_inventory`, `game_items` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ, ì œì•½ ì¡°ê±´, RLS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸.
    *   DB í•¨ìˆ˜/íŠ¸ëœì­ì…˜ ë¡œì§ì´ ì˜ë„ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜í–‰.

---

